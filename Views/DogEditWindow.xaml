<Window x:Class="Einsatzueberwachung.Views.DogEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        Title="{Binding WindowTitle}"
        Height="650" Width="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource Surface}"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Orange Design System for Dog Edit -->
        <Style x:Key="DogEditCard" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource SurfaceContainer}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource OutlineVariant}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="8"/>
            <!-- Orange glow effect -->
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="{DynamicResource PrimaryColor}" 
                                    BlurRadius="8" ShadowDepth="0" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DogEditInput" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Background" Value="{DynamicResource SurfaceVariant}"/>
            <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Outline}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <!-- Orange focus border -->
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{DynamicResource Primary}"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DogEditCheckBox" TargetType="CheckBox" BasedOn="{StaticResource {x:Type CheckBox}}">
            <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
            <Setter Property="Margin" Value="0,6"/>
            <Setter Property="FontSize" Value="13"/>
            <!-- Orange accent color -->
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.MenuHighlightBrushKey}" 
                               Color="{DynamicResource PrimaryColor}"/>
            </Style.Resources>
        </Style>

        <Style x:Key="DogEditComboBox" TargetType="ComboBox" BasedOn="{StaticResource {x:Type ComboBox}}">
            <Setter Property="Background" Value="{DynamicResource SurfaceVariant}"/>
            <Setter Property="Foreground" Value="{DynamicResource OnSurface}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Outline}"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <!-- Orange focus border -->
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{DynamicResource Primary}"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with Orange Gradient -->
        <Border Grid.Row="0" Style="{StaticResource DogEditCard}">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="{DynamicResource PrimaryColor}" Offset="0"/>
                    <GradientStop Color="{DynamicResource PrimaryContainerColor}" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <StackPanel>
                <StackPanel Orientation="Horizontal">
                    <fa:FontAwesome Icon="Paw" FontSize="24" 
                                   Foreground="{DynamicResource OnPrimary}" 
                                   VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <TextBlock Text="Hunde-Daten erfassen" FontSize="20" FontWeight="Bold" 
                              Foreground="{DynamicResource OnPrimary}"/>
                </StackPanel>
                <TextBlock Text="Erfassen Sie die Hundeinformationen und Spezialisierungen" 
                          FontSize="12" Foreground="{DynamicResource OnPrimary}" 
                          Opacity="0.8" Margin="36,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- Form -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="8">
                <!-- Basis-Informationen -->
                <Border Style="{StaticResource DogEditCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <fa:FontAwesome Icon="InfoCircle" FontSize="16" 
                                           Foreground="{DynamicResource Primary}" 
                                           VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Basis-Informationen" FontSize="16" FontWeight="SemiBold" 
                                      Foreground="{DynamicResource OnSurface}"/>
                        </StackPanel>

                        <TextBlock Text="Name *" Foreground="{DynamicResource OnSurfaceVariant}" FontWeight="Medium"/>
                        <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" 
                                Style="{StaticResource DogEditInput}" Margin="0,4,0,16"/>

                        <TextBlock Text="Rasse" Foreground="{DynamicResource OnSurfaceVariant}" FontWeight="Medium"/>
                        <TextBox Text="{Binding Rasse, UpdateSourceTrigger=PropertyChanged}" 
                                Style="{StaticResource DogEditInput}" Margin="0,4,0,16"/>

                        <TextBlock Text="Alter (Jahre)" Foreground="{DynamicResource OnSurfaceVariant}" FontWeight="Medium"/>
                        <TextBox Text="{Binding Alter, UpdateSourceTrigger=PropertyChanged}" 
                                Style="{StaticResource DogEditInput}" Margin="0,4,0,16"/>

                        <CheckBox IsChecked="{Binding IsActive}" Content="âœ“ Aktiv" 
                                 Style="{StaticResource DogEditCheckBox}" FontWeight="Medium"/>
                    </StackPanel>
                </Border>

                <!-- Spezialisierungen -->
                <Border Style="{StaticResource DogEditCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <fa:FontAwesome Icon="Certificate" FontSize="16" 
                                           Foreground="{DynamicResource Primary}" 
                                           VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Spezialisierungen" FontSize="16" FontWeight="SemiBold" 
                                      Foreground="{DynamicResource OnSurface}"/>
                        </StackPanel>
                        
                        <TextBlock Text="WÃ¤hlen Sie eine oder mehrere Spezialisierungen aus:" 
                                  FontSize="12" Foreground="{DynamicResource OnSurfaceVariant}" 
                                  Margin="0,0,0,12" TextWrapping="Wrap"/>

                        <CheckBox IsChecked="{Binding Flaechensuche}" Content="ðŸ”µ FlÃ¤chensuchhund" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Truemmersuche}" Content="ðŸŸ  TrÃ¼mmersuchhund" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Mantrailing}" Content="ðŸŸ¢ Mantrailer" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Wasserortung}" Content="ðŸ”· Wasserortung" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Lawinensuche}" Content="ðŸŸ£ Lawinensuchhund" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Gelaendesuche}" Content="ðŸŸ© GelÃ¤ndesuchhund" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                        <CheckBox IsChecked="{Binding Leichensuche}" Content="ðŸŸ¤ LeichenspÃ¼rhund" 
                                 Style="{StaticResource DogEditCheckBox}"/>
                    </StackPanel>
                </Border>

                <!-- HundefÃ¼hrer -->
                <Border Style="{StaticResource DogEditCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <fa:FontAwesome Icon="User" FontSize="16" 
                                           Foreground="{DynamicResource Primary}" 
                                           VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="HundefÃ¼hrer (optional)" FontSize="16" FontWeight="SemiBold" 
                                      Foreground="{DynamicResource OnSurface}"/>
                        </StackPanel>
                        
                        <ComboBox ItemsSource="{Binding HundefuehrerList}"
                                 SelectedItem="{Binding SelectedHundefuehrer}"
                                 DisplayMemberPath="FullName"
                                 Style="{StaticResource DogEditComboBox}"/>
                    </StackPanel>
                </Border>

                <!-- Notizen -->
                <Border Style="{StaticResource DogEditCard}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <fa:FontAwesome Icon="StickyNote" FontSize="16" 
                                           Foreground="{DynamicResource Primary}" 
                                           VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock Text="Notizen" FontSize="16" FontWeight="SemiBold" 
                                      Foreground="{DynamicResource OnSurface}"/>
                        </StackPanel>
                        
                        <TextBox Text="{Binding Notizen, UpdateSourceTrigger=PropertyChanged}" 
                                Style="{StaticResource DogEditInput}" 
                                TextWrapping="Wrap" AcceptsReturn="True" Height="80"
                                VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons with Orange Styling -->
        <Border Grid.Row="2" Style="{StaticResource DogEditCard}">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Command="{Binding SaveCommand}" 
                       Width="140" Height="40" Margin="0,0,12,0"
                       Style="{StaticResource PrimaryButton}">
                    <StackPanel Orientation="Horizontal">
                        <fa:FontAwesome Icon="Check" FontSize="14" Margin="0,0,6,0"/>
                        <TextBlock Text="Speichern"/>
                    </StackPanel>
                </Button>
                
                <Button Command="{Binding CancelCommand}" 
                       Width="140" Height="40"
                       Style="{StaticResource SecondaryButton}">
                    <StackPanel Orientation="Horizontal">
                        <fa:FontAwesome Icon="Times" FontSize="14" Margin="0,0,6,0"/>
                        <TextBlock Text="Abbrechen"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</Window>
