<Window x:Class="Einsatzueberwachung.TeamTypeSelectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        Title="Team-Spezialisierung auswÃ¤hlen" Height="771" Width="460"
        WindowStartupLocation="CenterOwner"
        Icon="pack://application:,,,/Resources/app.ico"
        ResizeMode="NoResize"
        Background="{DynamicResource SurfaceContainer}">

    <Window.Resources>
        <!-- Specialized CheckBox for Team Types using global design system -->
        <Style x:Key="TeamTypeCheckBox" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Border x:Name="MainBorder" 
                                Style="{StaticResource Card}"
                                Background="{DynamicResource Surface}"
                                BorderBrush="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}"
                                BorderThickness="2"
                                Margin="0,0,0,12"
                                Padding="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Type Color Indicator -->
                                <Border Grid.Column="0" Width="20" Height="20" CornerRadius="10" 
                                       Background="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}" 
                                       Margin="0,0,12,0" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="1" Opacity="0.2"/>
                                    </Border.Effect>
                                </Border>
                                
                                <!-- Content -->
                                <ContentPresenter Grid.Column="1" VerticalAlignment="Center"/>
                                
                                <!-- Selection Indicator -->
                                <Border Grid.Column="2" x:Name="SelectionIndicator"
                                       Width="28" Height="28" CornerRadius="14"
                                       Background="{DynamicResource Success}"
                                       Visibility="Collapsed">
                                    <fa:ImageAwesome x:Name="CheckIcon"
                                                   Icon="Check" Width="14" Height="14" 
                                                   Foreground="White"/>
                                </Border>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="MainBorder" Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="{Binding Tag.Color, RelativeSource={RelativeSource TemplatedParent}}" 
                                                       Opacity="0.08"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="MainBorder" Property="BorderThickness" Value="3"/>
                                <Setter TargetName="SelectionIndicator" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="MainBorder" Property="Effect" Value="{StaticResource Elevation3}"/>
                                <Setter TargetName="MainBorder" Property="BorderThickness" Value="3"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ðŸŽ¯ Header Section -->
        <Border Grid.Row="0" Style="{StaticResource Card}" 
               Background="{DynamicResource PrimaryContainer}" 
               Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <!-- Icon -->
                <Border Width="56" Height="56" CornerRadius="28" 
                       Background="{DynamicResource Primary}" Margin="0,0,16,0">
                    <fa:ImageAwesome Icon="Paw" Width="28" Height="28" 
                                   Foreground="White"/>
                </Border>
                
                <!-- Title -->
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Team-Spezialisierung" Style="{StaticResource HeadlineSmall}"
                              Foreground="{DynamicResource OnPrimaryContainer}"/>
                    <TextBlock Text="WÃ¤hlen Sie eine oder mehrere aus" Style="{StaticResource BodyMedium}"
                              Foreground="{DynamicResource OnPrimaryContainer}" Opacity="0.8"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- ðŸ’¡ Information Panel -->
        <Border Grid.Row="1" Style="{StaticResource Card}" 
               Background="{DynamicResource SuccessContainer}"
               BorderBrush="{DynamicResource Success}" BorderThickness="1"
               Margin="0,0,0,29">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <fa:ImageAwesome Icon="LightbulbOutline" Width="16" Height="16" 
                                   Foreground="{DynamicResource Success}" Margin="0,0,8,0"/>
                    <TextBlock Text="Hinweise" Style="{StaticResource TitleSmall}"
                              Foreground="{DynamicResource OnSuccessContainer}"/>
                </StackPanel>

                <TextBlock TextWrapping="Wrap" Style="{StaticResource BodySmall}"
                          Foreground="{DynamicResource OnSuccessContainer}" LineHeight="18">
                    <Run Text="â€¢ Mindestens eine Auswahl erforderlich"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- ðŸŽ¯ Team Type Selection -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto" Margin="0,0,0,67" Grid.RowSpan="2">
            <StackPanel x:Name="TypeCheckBoxPanel">
                <!-- CheckBoxes will be generated in code-behind -->
            </StackPanel>
        </ScrollViewer>

        <!-- ðŸ“‹ Selection Summary -->
        <Border Grid.Row="3" Style="{StaticResource Card}" 
               Background="{DynamicResource SurfaceVariant}"
               Margin="0,16,0,0">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <fa:ImageAwesome Icon="CheckCircle" Width="16" Height="16" 
                                   Foreground="{DynamicResource Primary}" Margin="0,0,8,0"/>
                    <TextBlock Text="AusgewÃ¤hlte Spezialisierungen:" Style="{StaticResource TitleSmall}"
                              Foreground="{DynamicResource OnSurface}"/>
                </StackPanel>
                
                <TextBlock x:Name="TxtSelectedTypes" Text="Keine Auswahl" 
                          Style="{StaticResource BodyMedium}"
                          Foreground="{DynamicResource OnSurfaceVariant}" 
                          TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <!-- ðŸŽ¬ Action Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" 
                   Margin="0,20,0,0">
            <Button Content="Alle abwÃ¤hlen" Click="BtnClearAll_Click" 
                   Style="{StaticResource TextButton}" Margin="0,0,12,0"/>
               
            <Button Content="Abbrechen" Click="BtnCancel_Click" 
                   Style="{StaticResource OutlinedButton}" Margin="12,0"/>
               
            <Button x:Name="BtnOK" Click="BtnOK_Click" 
                   Style="{StaticResource FilledButton}" 
                   Background="{DynamicResource Success}" Margin="12,0,0,0">
                <StackPanel Orientation="Horizontal">
                    <fa:ImageAwesome Icon="Check" Width="14" Height="14" 
                                   Foreground="White" Margin="0,0,6,0"/>
                    <TextBlock Text="BestÃ¤tigen" Foreground="White"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window>
